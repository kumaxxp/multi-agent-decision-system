# main_direct.py 使用ガイド

`main_direct.py`は、OpenAI APIを直接使用して多エージェント対話を行うシンプルで確実に動作するバージョンです。

## 🚀 クイックスタート

### 1. OpenAI APIキーの準備

1. [OpenAI公式サイト](https://platform.openai.com/api-keys)でAPIキーを取得
2. `.env`ファイルを編集してAPIキーを設定：

```bash
# .envファイル
OPENAI_API_KEY=sk-your-actual-api-key-here
MODEL_NAME=gpt-3.5-turbo
```

### 2. 実行方法

```bash
# 基本的な実行
python main_direct.py "議論したいトピック"

# 例
python main_direct.py "AIは人間の創造性を高めるか？"
python main_direct.py "リモートワークのメリット・デメリット"
python main_direct.py "持続可能な社会を作るために必要なこと"
```

### 3. インタラクティブモード

引数なしで実行すると、トピック入力を求められます：

```bash
python main_direct.py
# → 議論したいトピックを入力してください: [ここに入力]
```

## 🤖 エージェントの役割

システムは3つのエージェントが順番に発言します：

### 1. 語り手エージェント
- **役割**: 創造的で大胆な意見を述べる
- **特徴**: 想像力豊かで時には大げさな表現を使用
- **目的**: 議論の方向性を示し、火付け役となる

### 2. 相槌役エージェント  
- **役割**: 慎重に内容を確認し、建設的な意見を述べる
- **特徴**: 語り手の発言を精査し、良い点は同意、問題点は指摘
- **目的**: 議論の質を高め、バランスを保つ

### 3. 判定役エージェント
- **役割**: 議論を整理し、最終結論を導く
- **特徴**: 公平な視点で両者の意見を統合
- **目的**: 結論と代替案を提示し、議論を終了

## 📋 実行例

```bash
$ python main_direct.py "在宅勤務は生産性を向上させるか？"

=== 多エージェント対話システム（直接API版） ===
ユーザー入力: 在宅勤務は生産性を向上させるか？

[語り手の発言]
在宅勤務は間違いなく生産性を革命的に向上させます！
通勤時間の削減により、その時間を仕事に集中できる...
--------------------------------------------------

[相槌役の発言]  
確かに通勤時間の削減は大きなメリットですね。
ただし、在宅勤務には集中力の課題もあります...
--------------------------------------------------

[判定役の発言]
両者の意見を総合すると、在宅勤務は適切に管理されれば
生産性向上の効果が期待できます...

以上で議論を終了します。
--------------------------------------------------

対話ログを保存しました: conversation_logs/direct_session_20250809_123456.json
```

## 💾 ログ機能

- 全ての対話は`conversation_logs/`フォルダに自動保存
- ファイル名: `direct_session_YYYYMMDD_HHMMSS.json`
- JSON形式で保存され、後から分析や参照が可能

## ⚙️ カスタマイズ

### モデルの変更

`.env`ファイルで使用モデルを変更できます：

```bash
# より高性能なモデルを使用
MODEL_NAME=gpt-4

# より経済的なモデルを使用  
MODEL_NAME=gpt-3.5-turbo
```

### 温度パラメータの調整

`main_direct.py`内で`temperature`値を変更：

```python
temperature=0.7  # デフォルト（バランス型）
temperature=0.3  # より保守的・一貫性重視
temperature=0.9  # より創造的・多様性重視
```

## 🔧 トラブルシューティング

### APIキーエラー
```
警告: OPENAI_API_KEY が設定されていません
```
→ `.env`ファイルでAPIキーを正しく設定してください

### レート制限エラー
```
APIエラー: Rate limit exceeded
```
→ しばらく待ってから再実行してください

### ネットワークエラー
```  
APIエラー: Connection timeout
```
→ インターネット接続を確認してください

## 💡 使用のコツ

### 効果的なトピック例
- **具体的**: 「リモートワーク vs オフィス勤務の生産性比較」
- **議論余地あり**: 「AIは創造性を高めるか阻害するか？」
- **現実的**: 「持続可能な働き方を実現する方法」

### 避けるべきトピック
- **事実確認のみ**: 「東京の人口は？」
- **あまりに専門的**: 「量子コンピューターの技術仕様」
- **機密・個人情報**: 個人や企業の機密に関する内容

## 📊 コスト目安

- gpt-3.5-turbo使用時: 約$0.01-0.03/回（トピックの複雑さによる）
- gpt-4使用時: 約$0.10-0.30/回

## 🔄 他バージョンとの比較

| バージョン | 状態 | 特徴 |
|------------|------|------|
| `main_direct.py` | ✅ 動作 | OpenAI API直接使用、確実に動作 |
| `demo_run.py` | ✅ 動作 | モデル不要、デモ用 |
| `main_local.py` | ❌ 要修正 | ローカルモデル使用（開発中） |
| `main.py` | ❌ 要修正 | AutoGen使用（API互換性問題） |

現在は`main_direct.py`の使用を強く推奨します。